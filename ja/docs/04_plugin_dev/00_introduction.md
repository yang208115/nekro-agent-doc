---
title: はじめに
description: Nekro Agentプラグイン開発ガイドの紹介。プラグインとは何か、何ができるか、システムアーキテクチャについて理解します。
---

# はじめに

Nekro Agentプラグイン開発の世界へようこそ！このガイドでは、ゼロからNekro Agent向けの強力で創造的なプラグインを作成する方法を学びます。

## Nekro Agentプラグインとは？

Nekro Agentプラグインは、Nekro Agentのコア機能を拡張する方法です。プラグインを通じて、開発者はエージェント向けの新しいツール、情報源、対話ロジックを追加し、他のサービスやシステムと統合することさえできます。プラグインにより、Nekro Agentはより幅広いアプリケーションシナリオに適応し、よりパーソナライズされたニーズを満たすことができます。

各プラグインは独立したPythonモジュールであり、Nekro Agentが提供するAPIを通じてコアシステムと対話します。

## プラグインは何ができますか？

Nekro Agentプラグインは、エージェントに完了させたいほぼすべてのタスクを実装できます。例えば：

*   **AI機能の強化**:
    *   専門分野のナレッジベースクエリを提供します。
    *   複雑な数学的計算やデータ分析を実行します。
    *   サードパーティAPI（天気クエリ、ニュース集約、翻訳サービスなど）を統合します。
*   **特定のアクションの実行**:
    *   メッセージ、メール、または通知を送信します。
    *   スケジュールタスクとリマインダーを管理します。
    *   スマートホームデバイスを制御します。
*   **外部システムとの対話**:
    *   完全なRESTful設計をサポートする強力なWeb APIアクセスポイントを作成します。
    *   他のアプリケーションやサービスとデータを同期します。
    *   ファイル転送とマルチメディアコンテンツの対話を処理します。
*   **ユーザーエクスペリエンスのパーソナライズ**:
    *   ユーザーの好みに基づいてカスタマイズされたコンテンツを提供します。
    *   独特の人間とコンピュータの対話方法を実装します。
    *   ベクトルデータベースを使用して、インテリジェントなセマンティック検索機能を提供します。

プラグインの種類は多様で、単純なツール呼び出しから複雑なビジネスロジック処理まで様々です。あなたの想像力を最大限に発揮することができます。

## プラグインシステムアーキテクチャ概要

Nekro Agentプラグインシステムは、モジュール式とイベント駆動型のアーキテクチャに基づいて設計されています：

1.  **プラグイン登録**: 各プラグインは `NekroPlugin` クラスを通じて定義および登録され、そのメタデータと機能を宣言します。
2.  **サンドボックス実行とRPC**: AIが生成した指示（通常はPythonコードスニペット）は、分離されたサンドボックス環境で実行されます。これらの指示がプラグインが提供する関数を呼び出す必要がある場合、RPC（リモートプロシージャコール）メカニズムを通じてメインサービスプロセスで実行されているプラグインメソッドを呼び出します。プラグインメソッドの実行結果は、サンドボックスに返され、後続のAI処理に使用されます。
3.  **API対話**: プラグインは、Nekro Agentが提供する豊富なAPIを通じてコアサービス（メッセージ送信、データストレージ、コンテキスト管理など）と対話します。
4.  **イベント駆動**: プラグインは、メッセージ受信、セッションリセットなど、システム内の様々なイベントをリッスンし、応答できます。
5.  **設定とストレージ**: プラグインは、ユーザーが管理しやすいように独自の設定項目を定義でき、データを永続化するための独立したストレージスペースを持っています。
6.  **高度な機能**:
    *   **動的ルーティング**: FastAPIに基づいて強力なWeb APIエンドポイントを作成し、完全なRESTful機能をサポートします。
    *   **ファイルシステム**: `AgentCtx.fs`を通じてプラグインとAIサンドボックス間で効率的なファイル転送を実現します。
    *   **ベクトルデータベース**: Qdrantベクトルデータベースを統合し、プラグインにセマンティック検索とインテリジェントな検索機能を提供します。
    *   **コンテキスト管理**: `AgentCtx`を通じてチャット情報、メッセージサービス、設定、アダプター機能に統一的にアクセスします。
    *   **非同期タスク**: 進捗追跡、キャンセル、終端コールバックをサポートする長時間実行バックグラウンドタスクを、メイン会話をブロックせずに実行します。

この設計により、プラグイン実行の柔軟性と安全性を確保しながら、開発者に強力な拡張機能を提供します。

## このガイドを読むための前提条件

このガイドをより良く理解し学習するために、以下の基礎があることが推奨されます：

*   **Pythonプログラミングの基礎**: Python構文、非同期プログラミング（`async/await`）、オブジェクト指向プログラミングに精通していること。
*   **API概念の理解**: APIが何か、そしてそれを使用する方法を理解していること。
*   **Nekro Agentの基本的な使用法**: Nekro Agentの基本機能と操作についてある程度理解していること。

準備ができたら、プラグイン開発の探求の旅を始めましょう！